(function(f,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],l):(f=typeof globalThis!="undefined"?globalThis:f||self,l(f.useEtherWallet={},f.React))})(this,function(f,l){"use strict";var Me=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var G=(f,l,m)=>l in f?Me(f,l,{enumerable:!0,configurable:!0,writable:!0,value:m}):f[l]=m,K=(f,l)=>{for(var m in l||(l={}))Re.call(l,m)&&G(f,m,l[m]);if(Y)for(var m of Y(l))Te.call(l,m)&&G(f,m,l[m]);return f};function m(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var j=m(l);const R=e=>{let t;const n=new Set,o=(i,s)=>{const S=typeof i=="function"?i(t):i;if(S!==t){const p=t;t=s?S:Object.assign({},t,S),n.forEach(_=>_(t,p))}},r=()=>t,v={setState:o,getState:r,subscribe:i=>(n.add(i),()=>n.delete(i)),destroy:()=>n.clear()};return t=e(o,r,v),v},Q=e=>e?R(e):R;var T={exports:{}},$={},z={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=j.default;function X(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Z=typeof Object.is=="function"?Object.is:X,ee=W.useState,te=W.useEffect,ne=W.useLayoutEffect,oe=W.useDebugValue;function re(e,t){var n=t(),o=ee({inst:{value:n,getSnapshot:t}}),r=o[0].inst,c=o[1];return ne(function(){r.value=n,r.getSnapshot=t,L(r)&&c({inst:r})},[e,n,t]),te(function(){return L(r)&&c({inst:r}),e(function(){L(r)&&c({inst:r})})},[e]),oe(n),n}function L(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Z(e,n)}catch{return!0}}function ce(e,t){return t()}var se=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?ce:re;D.useSyncExternalStore=W.useSyncExternalStore!==void 0?W.useSyncExternalStore:se,z.exports=D;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P=j.default,ie=z.exports;function ae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var le=typeof Object.is=="function"?Object.is:ae,ue=ie.useSyncExternalStore,de=P.useRef,fe=P.useEffect,ve=P.useMemo,he=P.useDebugValue;$.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var c=de(null);if(c.current===null){var u={hasValue:!1,value:null};c.current=u}else u=c.current;c=ve(function(){function i(g){if(!s){if(s=!0,S=g,g=o(g),r!==void 0&&u.hasValue){var y=u.value;if(r(y,g))return p=y}return p=g}if(y=p,le(S,g))return y;var I=o(g);return r!==void 0&&r(y,I)?y:(S=g,p=I)}var s=!1,S,p,_=n===void 0?null:n;return[function(){return i(t())},_===null?void 0:function(){return i(_())}]},[t,n,o,r]);var v=ue(e,c[0],c[1]);return fe(function(){u.hasValue=!0,u.value=v},[v]),he(v),v},T.exports=$;function me(e,t=e.getState,n){const o=T.exports.useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return l.useDebugValue(o),o}const F=e=>{const t=typeof e=="function"?Q(e):e,n=(o,r)=>me(t,o,r);return Object.assign(n,t),n};var N=e=>e?F(e):F,Se=Object.defineProperty,H=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,A=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))pe.call(t,n)&&A(e,n,t[n]);if(H)for(var n of H(t))ye.call(t,n)&&A(e,n,t[n]);return e};const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(o){return b(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return b(o)(n)}}}},we=(e,t)=>(n,o,r)=>{let c=C({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:a=>a,version:0,merge:(a,w)=>C(C({},w),a)},t),u=!1;const v=new Set,i=new Set;let s;try{s=c.getStorage()}catch{}if(!s)return e((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...a)},o,r);const S=b(c.serialize),p=()=>{const a=c.partialize(C({},o()));let w;const d=S({state:a,version:c.version}).then(E=>s.setItem(c.name,E)).catch(E=>{w=E});if(w)throw w;return d},_=r.setState;r.setState=(a,w)=>{_(a,w),p()};const g=e((...a)=>{n(...a),p()},o,r);let y;const I=()=>{var a;if(!s)return;u=!1,v.forEach(d=>d(o()));const w=((a=c.onRehydrateStorage)==null?void 0:a.call(c,o()))||void 0;return b(s.getItem.bind(s))(c.name).then(d=>{if(d)return c.deserialize(d)}).then(d=>{if(d)if(typeof d.version=="number"&&d.version!==c.version){if(c.migrate)return c.migrate(d.state,d.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return d.state}).then(d=>{var E;return y=c.merge(d,(E=o())!=null?E:g),n(y,!0),p()}).then(()=>{w==null||w(y,void 0),u=!0,i.forEach(d=>d(y))}).catch(d=>{w==null||w(void 0,d)})};return r.persist={setOptions:a=>{c=C(C({},c),a),a.getStorage&&(s=a.getStorage())},clearStorage:()=>{s==null||s.removeItem(c.name)},rehydrate:()=>I(),hasHydrated:()=>u,onHydrate:a=>(v.add(a),()=>{v.delete(a)}),onFinishHydration:a=>(i.add(a),()=>{i.delete(a)})},I(),y||g},h=N()(we(e=>({isLoading:!0,currentWallet:void 0,account:void 0,provider:void 0,initializeStore:()=>e({currentWallet:void 0,account:void 0,provider:void 0}),setLoading:t=>e({isLoading:t}),setWalletState:t=>e(K({},t))}),{name:"ether_wallet",partialize:e=>Object.fromEntries(Object.entries(e).filter(([t])=>["currentWallet","account"].includes(t))),getStorage:()=>({setItem:(...e)=>window.localStorage.setItem(...e),removeItem:(...e)=>window.localStorage.removeItem(...e),getItem:async(...e)=>new Promise(t=>{typeof window=="undefined"?t(null):setTimeout(()=>{t(window.localStorage.getItem(...e))},0)})})})),q=N(e=>({walletConnectProvider:void 0,setWalletConnectProvider:t=>e({walletConnectProvider:t})})),J=async()=>{if(typeof window!="undefined")if(window.ethereum!==void 0)try{const[e]=await window.ethereum.request({method:"eth_requestAccounts"});h.setState({currentWallet:"MetaMask",account:e,provider:window.ethereum})}catch(e){console.error(e)}else window.open(`https://metamask.app.link/dapp/${window.location.href.replace(`${window.location.protocol}//`,"")}`,"_blank","noopener")};let k=!1;const ge=e=>new Promise((t,n)=>{const o=e.wc;e.isConnecting&&!k?e.onConnect(r=>t(r)):o.connected?(e.connected||(e.connected=!0,e.updateState(o.session)),t(o)):(e.isConnecting=!0,o.on("modal_closed",()=>{k=!0,e.isConnecting=!1}),k&&e.qrcodeModal.open(e.connector.uri,!1),o.createSession({chainId:e.chainId}).then(()=>{o.on("connect",(r,c)=>{if(r)return e.isConnecting=!1,n(r);e.isConnecting=!1,e.connected=!0,c&&e.updateState(c.params[0]),e.emit("connect"),e.triggerConnect(o),t(o)})}).catch(r=>{e.isConnecting=!1,n(r)}))}),_e=async e=>{const t=await ge(e);if(t)return e.start(),e.subscribeWalletConnector(),t.accounts;throw new Error("Failed to connect to WalletConnect")},We=async()=>{if(typeof window!="undefined"){const e=q.getState().walletConnectProvider,t=h.getState().initializeStore;if(B(e,"WalletConnect"))try{const n=await _e(e);h.setState({currentWallet:"WalletConnect",account:n[0],provider:e})}catch(n){t(),console.error(n)}else t()}},x={MetaMask:"MetaMask",WalletConnect:"WalletConnect"},U=e=>{switch(e){case x.MetaMask:return J();case x.WalletConnect:return We();default:return J()}};function B(e,t){return e!==void 0&&t==="WalletConnect"}const Ce=()=>{const e=h(i=>i.currentWallet),t=h(i=>i.account),n=h(i=>i.provider),o=h(i=>i.isLoading),r=h(i=>i.initializeStore);return{connectTo:U,disconnect:async()=>{r(),B(n,e)&&await n.disconnect()},isLoading:o,isWalletConnected:n!==void 0&&t!==void 0&&e!==void 0,currentWallet:e,account:t,provider:n,chainId:(()=>{if(n!==void 0&&n.chainId!==null)return parseInt(n.chainId.toString(),16)})()}};var M={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ee=j.default,Ie=Symbol.for("react.element"),Pe=Symbol.for("react.fragment"),be=Object.prototype.hasOwnProperty,xe=Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function V(e,t,n){var o,r={},c=null,u=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(u=t.ref);for(o in t)be.call(t,o)&&!Oe.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:Ie,type:e,key:c,ref:u,props:r,_owner:xe.current}}O.Fragment=Pe,O.jsx=V,O.jsxs=V,M.exports=O;const je=M.exports.jsx,Le=M.exports.Fragment,ke=({walletOptions:e,children:t})=>{const n=e==null?void 0:e.walletConnectProvider,o=h(s=>s.provider),r=h(s=>s.currentWallet),c=h(s=>s.isLoading),u=h(s=>s.setWalletState),v=h(s=>s.setLoading),i=q(s=>s.setWalletConnectProvider);return l.useEffect(()=>{i(n)},[n]),l.useEffect(()=>{if(r===void 0){v(!1);return}},[r]),l.useEffect(()=>{(async function(){if(r!==void 0&&c){switch(r){case x.MetaMask:u({provider:window.ethereum});break;case x.WalletConnect:u({provider:n});break;default:v(!1);return}await U(r),v(!1)}})()},[r,c]),l.useEffect(()=>{if(o!==void 0){const s=p=>{const _=p[0];u({account:_})},S=()=>{h.persist.clearStorage()};return o.on("accountsChanged",s),o.on("disconnect",S),()=>{o.removeListener("accountsChanged",s),o.removeListener("disconnect",S)}}},[o]),je(Le,{children:t})};f.EtherWalletProvider=ke,f.useEtherWallet=Ce,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=core.umd.js.map
