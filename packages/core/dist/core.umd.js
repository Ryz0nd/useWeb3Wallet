(function(f,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],l):(f=typeof globalThis!="undefined"?globalThis:f||self,l(f.useEtherWallet={},f.React))})(this,function(f,l){"use strict";var Ce=Object.defineProperty;var J=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var B=(f,l,h)=>l in f?Ce(f,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[l]=h,V=(f,l)=>{for(var h in l||(l={}))Pe.call(l,h)&&B(f,h,l[h]);if(J)for(var h of J(l))ke.call(l,h)&&B(f,h,l[h]);return f};function h(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var P=h(l);const M=e=>{let t;const n=new Set,r=(c,v)=>{const y=typeof c=="function"?c(t):c;if(y!==t){const g=t;t=v?y:Object.assign({},t,y),n.forEach(E=>E(t,g))}},i=()=>t,s={setState:r,getState:i,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(r,i,s),s},Y=e=>e?M(e):M;var R={exports:{}},T={},$={exports:{}},z={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=P.default;function G(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K=typeof Object.is=="function"?Object.is:G,Q=_.useState,X=_.useEffect,Z=_.useLayoutEffect,ee=_.useDebugValue;function te(e,t){var n=t(),r=Q({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Z(function(){i.value=n,i.getSnapshot=t,k(i)&&o({inst:i})},[e,n,t]),X(function(){return k(i)&&o({inst:i}),e(function(){k(i)&&o({inst:i})})},[e]),ee(n),n}function k(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!K(e,n)}catch{return!0}}function ne(e,t){return t()}var re=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?ne:te;z.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:re,$.exports=z;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x=P.default,oe=$.exports;function ie(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var se=typeof Object.is=="function"?Object.is:ie,ce=oe.useSyncExternalStore,ae=x.useRef,le=x.useEffect,ue=x.useMemo,de=x.useDebugValue;T.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=ae(null);if(o.current===null){var d={hasValue:!1,value:null};o.current=d}else d=o.current;o=ue(function(){function c(w){if(!v){if(v=!0,y=w,w=r(w),i!==void 0&&d.hasValue){var m=d.value;if(i(m,w))return g=m}return g=w}if(m=g,se(y,w))return m;var O=r(w);return i!==void 0&&i(m,O)?m:(y=w,g=O)}var v=!1,y,g,E=n===void 0?null:n;return[function(){return c(t())},E===null?void 0:function(){return c(E())}]},[t,n,r,i]);var s=ce(e,o[0],o[1]);return le(function(){d.hasValue=!0,d.value=s},[s]),de(s),s},R.exports=T;function fe(e,t=e.getState,n){const r=R.exports.useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return l.useDebugValue(r),r}const D=e=>{const t=typeof e=="function"?Y(e):e,n=(r,i)=>fe(t,r,i);return Object.assign(n,t),n};var ve=e=>e?D(e):D,pe=Object.defineProperty,F=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))he.call(t,n)&&N(e,n,t[n]);if(F)for(var n of F(t))me.call(t,n)&&N(e,n,t[n]);return e};const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return b(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return b(r)(n)}}}},Se=(e,t)=>(n,r,i)=>{let o=W({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:a=>a,version:0,merge:(a,S)=>W(W({},S),a)},t),d=!1;const s=new Set,c=new Set;let v;try{v=o.getStorage()}catch{}if(!v)return e((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...a)},r,i);const y=b(o.serialize),g=()=>{const a=o.partialize(W({},r()));let S;const u=y({state:a,version:o.version}).then(I=>v.setItem(o.name,I)).catch(I=>{S=I});if(S)throw S;return u},E=i.setState;i.setState=(a,S)=>{E(a,S),g()};const w=e((...a)=>{n(...a),g()},r,i);let m;const O=()=>{var a;if(!v)return;d=!1,s.forEach(u=>u(r()));const S=((a=o.onRehydrateStorage)==null?void 0:a.call(o,r()))||void 0;return b(v.getItem.bind(v))(o.name).then(u=>{if(u)return o.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==o.version){if(o.migrate)return o.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var I;return m=o.merge(u,(I=r())!=null?I:w),n(m,!0),g()}).then(()=>{S==null||S(m,void 0),d=!0,c.forEach(u=>u(m))}).catch(u=>{S==null||S(void 0,u)})};return i.persist={setOptions:a=>{o=W(W({},o),a),a.getStorage&&(v=a.getStorage())},clearStorage:()=>{v==null||v.removeItem(o.name)},rehydrate:()=>O(),hasHydrated:()=>d,onHydrate:a=>(s.add(a),()=>{s.delete(a)}),onFinishHydration:a=>(c.add(a),()=>{c.delete(a)})},O(),m||w},p=ve()(Se(e=>({isLoading:!0,currentWallet:void 0,account:void 0,provider:void 0,walletConnectProvider:void 0,initializeStore:()=>e({currentWallet:void 0,account:void 0,provider:void 0}),setWalletConnectProvider:t=>e({walletConnectProvider:t}),setLoading:t=>e({isLoading:t}),setWalletState:t=>e(V({},t))}),{name:"ether_wallet",partialize:e=>Object.fromEntries(Object.entries(e).filter(([t])=>["currentWallet","account"].includes(t))),getStorage:()=>({setItem:(...e)=>window.localStorage.setItem(...e),removeItem:(...e)=>window.localStorage.removeItem(...e),getItem:async(...e)=>new Promise(t=>{typeof window=="undefined"?t(null):setTimeout(()=>{t(window.localStorage.getItem(...e))},0)})})})),H=async()=>{if(typeof window!="undefined")if(window.ethereum!==void 0)try{const[e]=await window.ethereum.request({method:"eth_requestAccounts"});p.setState({currentWallet:"MetaMask",account:e,provider:window.ethereum})}catch(e){console.error(e)}else window.open(`https://metamask.app.link/dapp/${window.location.href.replace(`${window.location.protocol}//`,"")}`,"_blank","noopener")},ye=async()=>{if(typeof window!="undefined"){const e=p.getState().walletConnectProvider,t=p.getState().initializeStore;if(A(e,"WalletConnect"))try{e.qrcodeModal.open(e.connector.uri,!1),await e.enable(),p.setState({currentWallet:"WalletConnect",account:e.accounts[0],provider:e})}catch(n){if(n.message.includes("User closed modal")){e.qrcodeModal.close();return}t()}else t()}},j={MetaMask:"MetaMask",WalletConnect:"WalletConnect"},q=e=>{switch(e){case j.MetaMask:return H();case j.WalletConnect:return ye();default:return H()}};function A(e,t){return e!==void 0&&t==="WalletConnect"}const we=()=>{const e=p(c=>c.currentWallet),t=p(c=>c.account),n=p(c=>c.provider),r=p(c=>c.isLoading),i=p(c=>c.initializeStore);return{connectTo:q,disconnect:async()=>{i(),A(n,e)&&await n.disconnect()},isLoading:r,isWalletConnected:n!==void 0&&t!==void 0&&e!==void 0,currentWallet:e,account:t,provider:n,chainId:(()=>{if(n!==void 0&&n.chainId!==null)return parseInt(n.chainId.toString(),16)})()}};var L={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge=P.default,_e=Symbol.for("react.element"),We=Symbol.for("react.fragment"),Ee=Object.prototype.hasOwnProperty,Ie=ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function U(e,t,n){var r,i={},o=null,d=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)Ee.call(t,r)&&!Oe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:_e,type:e,key:o,ref:d,props:i,_owner:Ie.current}}C.Fragment=We,C.jsx=U,C.jsxs=U,L.exports=C;const xe=L.exports.jsx,be=L.exports.Fragment,je=({walletConnectProvider:e,children:t})=>{const n=p(s=>s.provider),r=p(s=>s.currentWallet),i=p(s=>s.setWalletState),o=p(s=>s.setLoading),d=p(s=>s.setWalletConnectProvider);return l.useEffect(()=>{d(e)},[e]),l.useEffect(()=>{if(r===void 0){o(!1);return}},[r]),l.useEffect(()=>{(async function(){switch(r){case j.MetaMask:i({provider:window.ethereum});break;case j.WalletConnect:i({provider:e});break;default:o(!1);return}await q(r),o(!1)})()},[r,e]),l.useEffect(()=>{if(n!==void 0){const s=v=>{const y=v[0];i({account:y})},c=()=>{p.persist.clearStorage()};return n.on("accountsChanged",s),n.on("disconnect",c),()=>{n.removeListener("accountsChanged",s),n.removeListener("disconnect",c)}}},[n]),xe(be,{children:t})};f.EtherWalletProvider=je,f.useEtherWallet=we,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=core.umd.js.map
