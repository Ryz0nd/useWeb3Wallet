(function(f,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(f=typeof globalThis!="undefined"?globalThis:f||self,a(f.useEtherWallet={},f.React))})(this,function(f,a){"use strict";var Me=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var G=(f,a,m)=>a in f?Me(f,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):f[a]=m,K=(f,a)=>{for(var m in a||(a={}))Re.call(a,m)&&G(f,m,a[m]);if(Y)for(var m of Y(a))Te.call(a,m)&&G(f,m,a[m]);return f};function m(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var j=m(a);const R=e=>{let t;const n=new Set,o=(s,d)=>{const w=typeof s=="function"?s(t):s;if(w!==t){const S=t;t=d?w:Object.assign({},t,w),n.forEach(C=>C(t,S))}},r=()=>t,h={setState:o,getState:r,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>n.clear()};return t=e(o,r,h),h},Q=e=>e?R(e):R;var T={exports:{}},$={},z={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=j.default;function X(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Z=typeof Object.is=="function"?Object.is:X,ee=_.useState,te=_.useEffect,ne=_.useLayoutEffect,oe=_.useDebugValue;function re(e,t){var n=t(),o=ee({inst:{value:n,getSnapshot:t}}),r=o[0].inst,c=o[1];return ne(function(){r.value=n,r.getSnapshot=t,L(r)&&c({inst:r})},[e,n,t]),te(function(){return L(r)&&c({inst:r}),e(function(){L(r)&&c({inst:r})})},[e]),oe(n),n}function L(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Z(e,n)}catch{return!0}}function ce(e,t){return t()}var se=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?ce:re;D.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:se,z.exports=D;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=j.default,ie=z.exports;function ae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var le=typeof Object.is=="function"?Object.is:ae,ue=ie.useSyncExternalStore,de=O.useRef,fe=O.useEffect,ve=O.useMemo,he=O.useDebugValue;$.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var c=de(null);if(c.current===null){var l={hasValue:!1,value:null};c.current=l}else l=c.current;c=ve(function(){function s(g){if(!d){if(d=!0,w=g,g=o(g),r!==void 0&&l.hasValue){var p=l.value;if(r(p,g))return S=p}return S=g}if(p=S,le(w,g))return p;var I=o(g);return r!==void 0&&r(p,I)?p:(w=g,S=I)}var d=!1,w,S,C=n===void 0?null:n;return[function(){return s(t())},C===null?void 0:function(){return s(C())}]},[t,n,o,r]);var h=ue(e,c[0],c[1]);return fe(function(){l.hasValue=!0,l.value=h},[h]),he(h),h},T.exports=$;function me(e,t=e.getState,n){const o=T.exports.useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return a.useDebugValue(o),o}const F=e=>{const t=typeof e=="function"?Q(e):e,n=(o,r)=>me(t,o,r);return Object.assign(n,t),n};var N=e=>e?F(e):F,Se=Object.defineProperty,H=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,A=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))pe.call(t,n)&&A(e,n,t[n]);if(H)for(var n of H(t))ye.call(t,n)&&A(e,n,t[n]);return e};const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(o){return b(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return b(o)(n)}}}},we=(e,t)=>(n,o,r)=>{let c=W({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:i=>i,version:0,merge:(i,y)=>W(W({},y),i)},t),l=!1;const h=new Set,s=new Set;let d;try{d=c.getStorage()}catch{}if(!d)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(...i)},o,r);const w=b(c.serialize),S=()=>{const i=c.partialize(W({},o()));let y;const u=w({state:i,version:c.version}).then(E=>d.setItem(c.name,E)).catch(E=>{y=E});if(y)throw y;return u},C=r.setState;r.setState=(i,y)=>{C(i,y),S()};const g=e((...i)=>{n(...i),S()},o,r);let p;const I=()=>{var i;if(!d)return;l=!1,h.forEach(u=>u(o()));const y=((i=c.onRehydrateStorage)==null?void 0:i.call(c,o()))||void 0;return b(d.getItem.bind(d))(c.name).then(u=>{if(u)return c.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==c.version){if(c.migrate)return c.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var E;return p=c.merge(u,(E=o())!=null?E:g),n(p,!0),S()}).then(()=>{y==null||y(p,void 0),l=!0,s.forEach(u=>u(p))}).catch(u=>{y==null||y(void 0,u)})};return r.persist={setOptions:i=>{c=W(W({},c),i),i.getStorage&&(d=i.getStorage())},clearStorage:()=>{d==null||d.removeItem(c.name)},rehydrate:()=>I(),hasHydrated:()=>l,onHydrate:i=>(h.add(i),()=>{h.delete(i)}),onFinishHydration:i=>(s.add(i),()=>{s.delete(i)})},I(),p||g},v=N()(we(e=>({isLoading:!0,currentWallet:void 0,account:void 0,provider:void 0,initializeStore:()=>e({currentWallet:void 0,account:void 0,provider:void 0}),setLoading:t=>e({isLoading:t}),setWalletState:t=>e(K({},t))}),{name:"ether_wallet",partialize:e=>Object.fromEntries(Object.entries(e).filter(([t])=>["currentWallet","account"].includes(t))),getStorage:()=>({setItem:(...e)=>window.localStorage.setItem(...e),removeItem:(...e)=>window.localStorage.removeItem(...e),getItem:async(...e)=>new Promise(t=>{typeof window=="undefined"?t(null):setTimeout(()=>{t(window.localStorage.getItem(...e))},0)})})})),q=N(e=>({walletConnectProvider:void 0,setWalletConnectProvider:t=>e({walletConnectProvider:t})})),J=async()=>{if(typeof window!="undefined")if(window.ethereum!==void 0)try{const[e]=await window.ethereum.request({method:"eth_requestAccounts"});v.setState({currentWallet:"MetaMask",account:e,provider:window.ethereum})}catch(e){console.error(e)}else window.open(`https://metamask.app.link/dapp/${window.location.href.replace(`${window.location.protocol}//`,"")}`,"_blank","noopener")};let k=!1;const ge=e=>new Promise((t,n)=>{const o=e.wc;e.isConnecting&&!k?e.onConnect(r=>t(r)):o.connected?(e.connected||(e.connected=!0,e.updateState(o.session)),t(o)):(e.isConnecting=!0,o.on("modal_closed",()=>{k=!0,e.isConnecting=!1}),k&&e.qrcodeModal.open(e.connector.uri,!1),o.createSession({chainId:e.chainId}).then(()=>{o.on("connect",(r,c)=>{if(r)return e.isConnecting=!1,n(r);e.isConnecting=!1,e.connected=!0,c&&e.updateState(c.params[0]),e.emit("connect"),e.triggerConnect(o),t(o)})}).catch(r=>{e.isConnecting=!1,n(r)}))}),_e=async e=>{const t=await ge(e);if(t)return e.start(),e.subscribeWalletConnector(),t.accounts;throw new Error("Failed to connect to WalletConnect")},We=async()=>{if(typeof window!="undefined"){const e=q.getState().walletConnectProvider,t=v.getState().initializeStore;if(B(e,"WalletConnect"))try{const n=await _e(e);v.setState({currentWallet:"WalletConnect",account:n[0],provider:e})}catch(n){t(),console.error(n)}else t()}},x={MetaMask:"MetaMask",WalletConnect:"WalletConnect"},U=e=>{switch(e){case x.MetaMask:return J();case x.WalletConnect:return We();default:return J()}};function B(e,t){return e!==void 0&&t==="WalletConnect"}const Ce=()=>{const e=v(s=>s.currentWallet),t=v(s=>s.account),n=v(s=>s.provider),o=v(s=>s.isLoading),r=v(s=>s.initializeStore);return{connectTo:U,disconnect:async()=>{r(),B(n,e)&&await n.disconnect()},isLoading:o,isWalletConnected:n!==void 0&&t!==void 0&&e!==void 0,currentWallet:e,account:t,provider:n,chainId:(()=>{if(n!==void 0&&n.chainId!==null)return parseInt(n.chainId.toString(),16)})()}};var M={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ee=j.default,Ie=Symbol.for("react.element"),Oe=Symbol.for("react.fragment"),be=Object.prototype.hasOwnProperty,xe=Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pe={key:!0,ref:!0,__self:!0,__source:!0};function V(e,t,n){var o,r={},c=null,l=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(l=t.ref);for(o in t)be.call(t,o)&&!Pe.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:Ie,type:e,key:c,ref:l,props:r,_owner:xe.current}}P.Fragment=Oe,P.jsx=V,P.jsxs=V,M.exports=P;const je=M.exports.jsx,Le=M.exports.Fragment,ke=({walletConnectProvider:e,children:t})=>{const n=v(s=>s.provider),o=v(s=>s.currentWallet),r=v(s=>s.isLoading),c=v(s=>s.setWalletState),l=v(s=>s.setLoading),h=q(s=>s.setWalletConnectProvider);return a.useEffect(()=>{h(e)},[e]),a.useEffect(()=>{if(o===void 0){l(!1);return}},[o]),a.useEffect(()=>{(async function(){if(o!==void 0&&r){switch(o){case x.MetaMask:c({provider:window.ethereum});break;case x.WalletConnect:c({provider:e});break;default:l(!1);return}await U(o),l(!1)}})()},[o,r]),a.useEffect(()=>{if(n!==void 0){const s=w=>{const S=w[0];c({account:S})},d=()=>{v.persist.clearStorage()};return n.on("accountsChanged",s),n.on("disconnect",d),()=>{n.removeListener("accountsChanged",s),n.removeListener("disconnect",d)}}},[n]),je(Le,{children:t})};f.EtherWalletProvider=ke,f.useEtherWallet=Ce,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=core.umd.js.map
