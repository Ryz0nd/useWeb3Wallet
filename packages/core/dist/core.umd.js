(function(f,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(f=typeof globalThis!="undefined"?globalThis:f||self,a(f.useEtherWallet={},f.React))})(this,function(f,a){"use strict";var je=Object.defineProperty;var V=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var Y=(f,a,h)=>a in f?je(f,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):f[a]=h,G=(f,a)=>{for(var h in a||(a={}))Le.call(a,h)&&Y(f,h,a[h]);if(V)for(var h of V(a))ke.call(a,h)&&Y(f,h,a[h]);return f};function h(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var j=h(a);const M=e=>{let t;const n=new Set,r=(o,d)=>{const w=typeof o=="function"?o(t):o;if(w!==t){const m=t;t=d?w:Object.assign({},t,w),n.forEach(E=>E(t,m))}},s=()=>t,p={setState:r,getState:s,subscribe:o=>(n.add(o),()=>n.delete(o)),destroy:()=>n.clear()};return t=e(r,s,p),p},K=e=>e?M(e):M;var R={exports:{}},T={},$={exports:{}},z={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=j.default;function Q(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var X=typeof Object.is=="function"?Object.is:Q,Z=_.useState,ee=_.useEffect,te=_.useLayoutEffect,ne=_.useDebugValue;function re(e,t){var n=t(),r=Z({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return te(function(){s.value=n,s.getSnapshot=t,L(s)&&i({inst:s})},[e,n,t]),ee(function(){return L(s)&&i({inst:s}),e(function(){L(s)&&i({inst:s})})},[e]),ne(n),n}function L(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!X(e,n)}catch{return!0}}function oe(e,t){return t()}var ie=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?oe:re;z.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:ie,$.exports=z;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x=j.default,se=$.exports;function ce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ae=typeof Object.is=="function"?Object.is:ce,le=se.useSyncExternalStore,ue=x.useRef,de=x.useEffect,fe=x.useMemo,ve=x.useDebugValue;T.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=ue(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=fe(function(){function o(g){if(!d){if(d=!0,w=g,g=r(g),s!==void 0&&l.hasValue){var S=l.value;if(s(S,g))return m=S}return m=g}if(S=m,ae(w,g))return S;var O=r(g);return s!==void 0&&s(S,O)?S:(w=g,m=O)}var d=!1,w,m,E=n===void 0?null:n;return[function(){return o(t())},E===null?void 0:function(){return o(E())}]},[t,n,r,s]);var p=le(e,i[0],i[1]);return de(function(){l.hasValue=!0,l.value=p},[p]),ve(p),p},R.exports=T;function pe(e,t=e.getState,n){const r=R.exports.useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return a.useDebugValue(r),r}const D=e=>{const t=typeof e=="function"?K(e):e,n=(r,s)=>pe(t,r,s);return Object.assign(n,t),n};var F=e=>e?D(e):D,he=Object.defineProperty,N=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))me.call(t,n)&&H(e,n,t[n]);if(N)for(var n of N(t))Se.call(t,n)&&H(e,n,t[n]);return e};const b=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return b(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return b(r)(n)}}}},ye=(e,t)=>(n,r,s)=>{let i=W({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:c=>c,version:0,merge:(c,y)=>W(W({},y),c)},t),l=!1;const p=new Set,o=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...c)},r,s);const w=b(i.serialize),m=()=>{const c=i.partialize(W({},r()));let y;const u=w({state:c,version:i.version}).then(I=>d.setItem(i.name,I)).catch(I=>{y=I});if(y)throw y;return u},E=s.setState;s.setState=(c,y)=>{E(c,y),m()};const g=e((...c)=>{n(...c),m()},r,s);let S;const O=()=>{var c;if(!d)return;l=!1,p.forEach(u=>u(r()));const y=((c=i.onRehydrateStorage)==null?void 0:c.call(i,r()))||void 0;return b(d.getItem.bind(d))(i.name).then(u=>{if(u)return i.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==i.version){if(i.migrate)return i.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var I;return S=i.merge(u,(I=r())!=null?I:g),n(S,!0),m()}).then(()=>{y==null||y(S,void 0),l=!0,o.forEach(u=>u(S))}).catch(u=>{y==null||y(void 0,u)})};return s.persist={setOptions:c=>{i=W(W({},i),c),c.getStorage&&(d=c.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},rehydrate:()=>O(),hasHydrated:()=>l,onHydrate:c=>(p.add(c),()=>{p.delete(c)}),onFinishHydration:c=>(o.add(c),()=>{o.delete(c)})},O(),S||g},v=F()(ye(e=>({isLoading:!0,currentWallet:void 0,account:void 0,provider:void 0,initializeStore:()=>e({currentWallet:void 0,account:void 0,provider:void 0}),setLoading:t=>e({isLoading:t}),setWalletState:t=>e(G({},t))}),{name:"ether_wallet",partialize:e=>Object.fromEntries(Object.entries(e).filter(([t])=>["currentWallet","account"].includes(t))),getStorage:()=>({setItem:(...e)=>window.localStorage.setItem(...e),removeItem:(...e)=>window.localStorage.removeItem(...e),getItem:async(...e)=>new Promise(t=>{typeof window=="undefined"?t(null):setTimeout(()=>{t(window.localStorage.getItem(...e))},0)})})})),A=F(e=>({walletConnectProvider:void 0,setWalletConnectProvider:t=>e({walletConnectProvider:t})})),J=async()=>{if(typeof window!="undefined")if(window.ethereum!==void 0)try{const[e]=await window.ethereum.request({method:"eth_requestAccounts"});v.setState({currentWallet:"MetaMask",account:e,provider:window.ethereum})}catch(e){console.error(e)}else window.open(`https://metamask.app.link/dapp/${window.location.href.replace(`${window.location.protocol}//`,"")}`,"_blank","noopener")},we=async()=>{if(typeof window!="undefined"){const e=A.getState().walletConnectProvider,t=v.getState().initializeStore;if(q(e,"WalletConnect"))try{await e.enable(),v.setState({currentWallet:"WalletConnect",account:e.accounts[0],provider:e})}catch(n){t(),console.error(n)}else t()}},C={MetaMask:"MetaMask",WalletConnect:"WalletConnect"},U=e=>{switch(e){case C.MetaMask:return J();case C.WalletConnect:return we();default:return J()}};function q(e,t){return e!==void 0&&t==="WalletConnect"}const ge=()=>{const e=v(o=>o.currentWallet),t=v(o=>o.account),n=v(o=>o.provider),r=v(o=>o.isLoading),s=v(o=>o.initializeStore);return{connectTo:U,disconnect:async()=>{s(),q(n,e)&&await n.disconnect()},isLoading:r,isWalletConnected:n!==void 0&&t!==void 0&&e!==void 0,currentWallet:e,account:t,provider:n,chainId:(()=>{if(n!==void 0&&n.chainId!==null)return parseInt(n.chainId.toString(),16)})()}};var k={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e=j.default,We=Symbol.for("react.element"),Ee=Symbol.for("react.fragment"),Ie=Object.prototype.hasOwnProperty,Oe=_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Ie.call(t,r)&&!xe.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:We,type:e,key:i,ref:l,props:s,_owner:Oe.current}}P.Fragment=Ee,P.jsx=B,P.jsxs=B,k.exports=P;const be=k.exports.jsx,Ce=k.exports.Fragment,Pe=({walletConnectProvider:e,children:t})=>{const n=v(o=>o.provider),r=v(o=>o.currentWallet),s=v(o=>o.isLoading),i=v(o=>o.setWalletState),l=v(o=>o.setLoading),p=A(o=>o.setWalletConnectProvider);return a.useEffect(()=>{p(e)},[e]),a.useEffect(()=>{if(r===void 0){l(!1);return}},[r]),a.useEffect(()=>{(async function(){if(r!==void 0&&s){switch(r){case C.MetaMask:i({provider:window.ethereum});break;case C.WalletConnect:i({provider:e});break;default:l(!1);return}await U(r),l(!1)}})()},[r,s]),a.useEffect(()=>{if(n!==void 0){const o=w=>{const m=w[0];i({account:m})},d=()=>{v.persist.clearStorage()};return n.on("accountsChanged",o),n.on("disconnect",d),()=>{n.removeListener("accountsChanged",o),n.removeListener("disconnect",d)}}},[n]),be(Ce,{children:t})};f.EtherWalletProvider=Pe,f.useEtherWallet=ge,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=core.umd.js.map
